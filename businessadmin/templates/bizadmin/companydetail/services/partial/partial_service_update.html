{% load static %}
{% load hosts %}
{% load crispy_forms_tags %}

<form method="POST" action="{% host_url 'updateservice' service.id host 'bizadmin' %}" id="updateservformss">
        {% csrf_token %}
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">Ã—</span>
            </button>
            <h4 class="modal-title {% if company.darkmode %}text-white{% endif %}">Update your {{ service.name }} service</h4>
        </div>
        <div class="modal-body">
            {{ service_form.name|as_crispy_field }}
            {{ service_form.description|as_crispy_field }}
        <div class="form-row">
            <div class="form-group col mb-0">
                        {{ service_form.price_type|as_crispy_field }}
                    </div>
                    <div class="form-group col mb-0">
                        {{ service_form.price|as_crispy_field }}
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col mb-0">
                        {{ service_form.duration_hour|as_crispy_field }}
                    </div>
                    <div class="form-group col mb-0"> 
                        {{ service_form.duration_minute|as_crispy_field }}
                    </div>
                </div>
                <a class="licolor" href="#simpleCollapse" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="simpleCollapse">Advanced Options</a>
                <div class="collapse" id="simpleCollapse">
                    {{ service_form.checkintime|as_crispy_field }}
                    {% if company.service_category.all %}
                        {{ category_form.category|as_crispy_field }}
                    {% endif %}
                    <div id="padd">
                        {{ service_form.padding|as_crispy_field }}
                    </div>
                    <div id="show-padding" class="form-row">
                        <div class="form-group col mb-0"> 
                            {{ service_form.paddingtime_hour|as_crispy_field }}
                        </div>
                        <div class="form-group col mb-0"> 
                            {{ service_form.paddingtime_minute|as_crispy_field }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Update Service</button>
        </div>
      </form>
<script >
    var $selectpicker = $('.selectpicker');
    //    Activate bootstrap-select
    if ($selectpicker.length != 0) {
        $selectpicker.selectpicker({
        
        });
    }
    $('#updateservformss').submit(function(e){
                e.preventDefault();
                {% comment %} btn.attr("data-category") {% endcomment %}
                $.ajax({
                    type:'POST',
                    url: "{% host_url 'updateservice' service.id host 'bizadmin' %}",
                    data: $('#updateservformss').serialize(),
                    headers:{
                        "X-CSRFToken": csrftoken
                    },
                    success:function(data){
                        $('#modal-update').modal('hide');
                        var htmlcontent = data.html_service_list
                        var el = document.querySelector('#service-t');
                        el.innerHTML = htmlcontent
                        console.log(data)
                        var htmlcontents = data.html_category_list
                        var catel = document.querySelector('#categorylisttab');
                        catel.innerHTML = htmlcontents
                        $.notify({
                            // options
                            message: data.view
                        },{
                            // settings
                            type: 'success'
                        });
                    }
                });
            });
</script> 