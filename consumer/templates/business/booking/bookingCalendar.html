{% extends 'account/business_sidebar.html' %}
{% block information %}
    <h1>Hello World</h1>
    
        <div id="calendar"></div>
    
{% endblock %}

{% block calendarscript %}
    <script>
        document.addEventListener('DOMContentLoaded', function(){
            if (window.innerWidth >= 768 ) {
                var leftitems = 'prev,next today'
                var rightitems = 'dayGridMonth,dayGridWeek,dayGridDay'
                var initviewcal = 'dayGridWeek'
                var asprat =2
            } else {
                var leftitems = 'prev,next'
                var rightitems = ''
                var initviewcal = 'listDay'
                var asprat = 1/2
                console.log(window.innerWidth)
            }
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                aspectRatio: asprat,
                events:[
                {% for booking in bookings %}
                    {
                        title: '{{ booking.service.name }}',
                        start: '{{ booking.start|date:"Y-m-d" }}'+'T'+'{{ booking.start|date:"H:i:s" }}',
                        end: '{{ booking.end|date:"Y-m-d" }}'+'T'+'{{ booking.end|date:"H:i:s" }}',
                    },
                {% endfor %}
                ],

                initialView: initviewcal,
                hiddenDays: [0,6],
                headerToolbar: {
                    left: leftitems,
                    center: 'title',
                    right: rightitems
                },
                businessHours: {
                    daysOfWeek: [1,2,3,4,5],
                    startTime: '10:00',
                    endTime: '18:00',
                },
                startTime: '10:00',
                endTime: '18:00',
            });
            calendar.render()
        });
    </script>
{% endblock %}